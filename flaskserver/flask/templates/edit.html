{% extends "base.html" %}
{% block head %}
<title>ACE in Action</title>
<style type="text/css" media="screen">
    #editor { 
        position: relative;
        width: 500px;
        height: 400px;
        
    }
</style>
{% endblock head %}

{% block body %}
<h2>Editing: {{script_name}}</h2>
<div id="editor">{{ code }}</div>

<div>
<form action="save" method="POST">
<input type="hidden" name="script" value="{{script_name}}">
<input type="hidden" name="code" id="code" value="{{ code }}">
<input type="submit" value="SAVE">
<a href="/">CANCEL</a>
</form>
</div>

<script src="http://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.getSession().setMode("ace/mode/python");
    editor.focus()
    session = editor.getSession();
    count = session.getLength();
    editor.gotoLine(count, session.getLine(count-1).length);

    var codearea = document.getElementById('code');
    editor.getSession().on('change', function(){
      codearea.value = editor.getSession().getValue();
    });
      
</script>

{% endblock body %}

